"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6061],{8058:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(7953),s=a(8835),l=a(200),r=a(8088),o=a(4761),i=a(628),c=a(5088);const m={mdxPageWrapper:"mdxPageWrapper_uVFZ"};function d(e){const{content:t}=e,{metadata:{title:a,description:d,frontMatter:u}}=t,{wrapperClassName:g,hide_table_of_contents:b}=u;return n.createElement(l.e3,{className:(0,s.A)(g??r.G.wrapper.mdxPages,r.G.page.mdxPage)},n.createElement(l.be,{title:a,description:d}),n.createElement(o.A,null,n.createElement("main",{className:"container container--fluid margin-vert--lg"},n.createElement("div",{className:(0,s.A)("row",m.mdxPageWrapper)},n.createElement("div",{className:(0,s.A)("col",!b&&"col--8")},n.createElement("article",null,n.createElement(i.A,null,n.createElement(t,null)))),!b&&t.toc.length>0&&n.createElement("div",{className:"col col--2"},n.createElement(c.A,{toc:t.toc,minHeadingLevel:u.toc_min_heading_level,maxHeadingLevel:u.toc_max_heading_level}))))))}},5281:(e,t,a)=>{a.d(t,{A:()=>E});var n=a(935),s=a(7953),l=a(4229);const r="button_iEEJ",o=()=>{window.ethereum.request({method:"eth_requestAccounts",params:[]})};function i(){return(0,l.A)()&&"ethereum"in window?s.createElement("button",{className:r,onClick:o},s.createElement("img",{src:"/img/metamask-fox.svg"}),"Connect MetaMask"):null}const c="button_MYch",m=()=>{window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x64",chainName:"Gnosis Chain via Colony",nativeCurrency:{name:"xDAI",symbol:"XDAI",decimals:18},rpcUrls:["https://xdai.colony.io/rpc/"],blockExplorerUrls:["https://blockscout.com/xdai/mainnet"]}]})};const d="button_YzVp";var u=a(6367);const g=JSON.parse('{"imports":{"ethers":"https://unpkg.com/ethers@legacy-v5/dist/ethers.esm.min.js","@colony/sdk":"https://unpkg.com/@colony/sdk@next/dist/prod/index.min.js"}}'),b=JSON.stringify(g),h=e=>{let{amountToStake:t,onChangeAmount:a,onSubmit:n,submitting:l}=e;return s.createElement("form",{onSubmit:n},s.createElement("h2",{className:"text-base font-semibold leading-7 text-gray-900"},"Stake CLNY for Reputation Mining"),s.createElement("p",{className:"mt-1 text-sm leading-6 text-gray-600"},"2000 CLNY need to be staked to participate in Reputation Mining."),s.createElement("div",{className:"space-y-12"},s.createElement("div",{className:"border-b border-gray-900/10 pb-6"},s.createElement("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},s.createElement("div",{className:"col-span-full"},s.createElement("label",{htmlFor:"stake-amount",className:"block text-sm font-bold leading-6 text-gray-900"},"Amount to stake (this is on top of the amount you already staked)"),s.createElement("div",{className:"mt-2"},s.createElement("input",{type:"number",name:"stake-amount",id:"stake-amount",placeholder:"2000",value:t||"",required:!0,disabled:l,onChange:a,className:"block w-full rounded-md border-0 py-1.5 px-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})))))),s.createElement("div",{className:"flex items-center justify-end gap-x-6"},s.createElement("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Stake")))},p=e=>{let{delegateAddress:t,onChangeAddress:a,onSubmit:n,submitting:l}=e;return s.createElement("form",{onSubmit:n},s.createElement("h2",{className:"text-base font-semibold leading-7 text-gray-900"},"Speficy a delegate address"),s.createElement("p",{className:"mt-1 text-sm leading-6 text-gray-600"},"Add an address that can mine for you. This is recommended as it doesn't require you to export your private key and save it on a server."),s.createElement("div",{className:"space-y-12"},s.createElement("div",{className:"border-b border-gray-900/10 pb-6"},s.createElement("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},s.createElement("div",{className:"col-span-full"},s.createElement("label",{htmlFor:"delegate-address",className:"block text-sm font-bold leading-6 text-gray-900"},"Delegate address"),s.createElement("div",{className:"mt-2"},s.createElement("input",{type:"text",name:"delegate-address",id:"delegate-address",value:t||"",placeholder:"0x...",required:!0,disabled:l,onChange:a,className:"block w-full rounded-md border-0 py-1.5 px-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})))))),s.createElement("div",{className:"mt-2 flex items-center justify-end gap-x-6"},s.createElement("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Add Delegate")))},f=e=>{let{amountToUnstake:t,onChangeAmount:a,onSubmit:n,stakedTokens:l,submitting:r}=e;return s.createElement("form",{onSubmit:n},s.createElement("h2",{className:"text-base font-semibold leading-7 text-gray-900"},"Unstake CLNY"),s.createElement("p",{className:"mt-1 text-sm leading-6 text-gray-600"},"Here you can unstake your CLNY that you have staked for Reputation Mining. This will make you ineligible for Reputation Mining."),s.createElement("div",{className:"space-y-12"},s.createElement("div",{className:"border-b border-gray-900/10 pb-6"},s.createElement("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},s.createElement("div",{className:"col-span-full"},s.createElement("label",{htmlFor:"staked-amount",className:"block text-sm font-bold leading-6 text-gray-900"},"Amount to unstake"),s.createElement("div",{className:"mt-2"},s.createElement("input",{type:"number",name:"staked-amount",id:"staked-amount",placeholder:l,value:t||"",required:!0,max:l,disabled:r,onChange:a,className:"block w-full rounded-md border-0 py-1.5 px-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})))))),s.createElement("div",{className:"mt-2 flex items-center justify-end gap-x-6"},s.createElement("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Unstake")))},k=e=>{let{network:t}=e;const[a,n]=(0,s.useState)(null),[l,r]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>{r(e.target.value)}),[]),b=(0,s.useCallback)((async()=>{const{colonyNetwork:e,ethereum:a}=t,s=e.getInternalNetworkContract(),l=await e.getMetaColony(),r=await l.token.balanceOf(a.selectedAddress);s.getMiningStake(a.selectedAddress).then((e=>{n({stakingAddress:a.selectedAddress,stakedTokens:e.amount,clnyBalance:r})}))}),[t.ethereum.selectedAddress]),k=(0,s.useCallback)((async e=>{e.preventDefault(),u(!0);const{colonyNetwork:a,ethers:n}=t,s=a.getInternalNetworkContract();try{const e=await s.stakeForMining(n.utils.parseEther(l));alert(`Staking successful! Check transaction hash: ${e.hash}`)}catch(r){return void alert("Staking failed. See console for details.")}finally{u(!1)}}),[l,t]),y=(0,s.useCallback)((async e=>{e.preventDefault(),u(!0);const{colonyNetwork:a}=t,n=a.getInternalNetworkContract();try{const e=await n.setMiningDelegate(o,!0);alert(`Mining delegate added successfully! Check transaction hash: ${e.hash}`)}catch(s){return void alert("Adding delegate failed. See console for details.")}finally{u(!1)}}),[l,t]),E=(0,s.useCallback)((async e=>{e.preventDefault(),u(!0);const{colonyNetwork:a,ethers:n}=t,s=a.getInternalNetworkContract();try{const e=await s.unstakeForMining(n.utils.parseEther(c));alert(`Unstaking successful! Check transaction hash: ${e.hash}`)}catch(l){return void alert("Unstaking failed. See console for details.")}finally{u(!1)}}),[c,t]),x=(0,s.useCallback)((e=>{i(e.target.value)}),[]),v=(0,s.useCallback)((e=>{m(e.target.value)}),[]);(0,s.useEffect)((()=>{b()}),[t.ethereum.selectedAddress]);const N=a?.stakedTokens||0,w=a?.clnyBalance||0,C=parseFloat(t.ethers.utils.formatEther(N)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),S=parseFloat(t.ethers.utils.formatEther(w)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return s.createElement("div",null,s.createElement("h2",{className:"text-lg font-semibold leading-7 text-gray-900"},"Current Staking Status"),s.createElement("p",{className:"mt-1 text-base font-semibold leading-7 text-gray-900"},"Staker address: ",s.createElement("code",null,a?.stakingAddress||"Loading..."),s.createElement("br",null),"Staked amount: ",s.createElement("code",null,C),s.createElement("br",null),"CLNY balance: ",s.createElement("code",null,S)),s.createElement(h,{amountToStake:l,onChangeAmount:g,onSubmit:k,submitting:d}),s.createElement(p,{delegateAddress:o,onChangeAddress:x,onSubmit:y,submitting:d}),s.createElement(f,{amountToUnstake:c,onChangeAmount:v,onSubmit:E,stakedTokens:C,submitting:d}))},y=()=>{const e=(()=>{const e=(0,l.A)(),[t,n]=(0,s.useState)(null),[r,o]=(0,s.useState)(null);if((0,u.nW)({id:"colony-sdk-importmap",type:"importmap",text:b}),(0,s.useEffect)((()=>{e&&((async()=>{const e=await Promise.resolve().then(a.bind(a,7714));n(e)})(),(async()=>{const e=await Promise.resolve().then(a.bind(a,8900));o(e)})())}),[e]),e&&window.ethereum&&t&&r){const{ColonyNetwork:e}=t,{providers:{Web3Provider:a}}=r,n=new a(window.ethereum).getSigner();return{colonyNetwork:new e(n),ethers:r,signer:n,ethereum:window.ethereum}}return null})(),[t,n]=(0,s.useState)("Loading Reputation Mining Setup...");if(setTimeout((()=>{n("Reticulating splines..."),setTimeout((()=>{n("Hang on. Almost ready...")}),3e3)}),3e3),!e)return s.createElement("div",null,t);const{ethereum:r}=e;return r.selectedAddress?s.createElement(k,{network:e}):s.createElement(i,null)},E={...n.A,"connect-metamask":i,"metamask-add-chain":function(){return(0,l.A)()&&"ethereum"in window?s.createElement("button",{className:c,onClick:m},s.createElement("img",{src:"/img/metamask-fox.svg"}),"Add Gnosis Chain to MetaMask"):null},"join-discord":function(){return s.createElement("a",{className:d,href:"https://discord.gg/feVZWwysqM",target:"_blank",rel:"nofollow noreferrer noopener"},s.createElement("img",{src:"/img/discord-mark-white.svg"}),"Join our Discord")},"reputation-mining-setup":y}}}]);